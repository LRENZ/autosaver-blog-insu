# Cloudflare Pages éƒ¨ç½²ä¿®å¤æŒ‡å—

## é—®é¢˜è¯´æ˜

Next.js 16 ä¸ Cloudflare Pages çš„é›†æˆå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚ç›®å‰æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š

---

## è§£å†³æ–¹æ¡ˆ 1: ä½¿ç”¨é™æ€å¯¼å‡ºï¼ˆæ¨èç”¨äºçº¯å†…å®¹ç«™ç‚¹ï¼‰

### ä¼˜ç‚¹
- âœ… å®Œå…¨å…¼å®¹ Cloudflare Pages
- âœ… å¿«é€ŸåŠ è½½
- âœ… æ— æœåŠ¡å™¨æˆæœ¬

### ç¼ºç‚¹
- âŒ å¤±å» Server Actions
- âŒ å¤±å»åŠ¨æ€æ•°æ®è·å–
- âŒ ç®¡ç†åå°æ— æ³•å·¥ä½œ

### å®æ–½æ­¥éª¤

1. **ä¿®æ”¹ `next.config.ts`**:
```typescript
const nextConfig: NextConfig = {
  output: 'export',
  images: {
    unoptimized: true,
  },
};
```

2. **æ„å»ºé™æ€ç«™ç‚¹**:
```bash
npm run build
```

3. **éƒ¨ç½² `out` ç›®å½•**:
```bash
npx wrangler pages deploy out --project-name autosaver-blog
```

### âš ï¸ æ³¨æ„
è¿™ç§æ–¹å¼**ä¸æ”¯æŒç®¡ç†åå°**ï¼Œä»…é€‚ç”¨äºçº¯å±•ç¤ºæ€§ç½‘ç«™ã€‚

---

## è§£å†³æ–¹æ¡ˆ 2: ä½¿ç”¨å…¶ä»–æ‰˜ç®¡å¹³å°ï¼ˆæ¨èï¼‰

ç”±äº Next.js 16 ä¸ Cloudflare Pages å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹å¹³å°ï¼š

### Option A: Vercelï¼ˆæœ€ä½³é€‰æ‹©ï¼‰

**ä¼˜ç‚¹**:
- âœ… Next.js åŸç”Ÿæ”¯æŒ
- âœ… é›¶é…ç½®
- âœ… å®Œæ•´åŠŸèƒ½æ”¯æŒï¼ˆServer Actionsã€åŠ¨æ€è·¯ç”±ç­‰ï¼‰
- âœ… å…è´¹å¥—é¤è¶³å¤Ÿä½¿ç”¨

**éƒ¨ç½²æ­¥éª¤**:
```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½•
vercel login

# 3. éƒ¨ç½²
vercel --prod
```

**é¢„è®¡æ—¶é—´**: 5åˆ†é’Ÿ

---

### Option B: Netlify

**ä¼˜ç‚¹**:
- âœ… è‰¯å¥½çš„ Next.js æ”¯æŒ
- âœ… å…è´¹å¥—é¤
- âœ… ç®€å•é…ç½®

**éƒ¨ç½²æ­¥éª¤**:
```bash
# 1. å®‰è£… Netlify CLI
npm i -g netlify-cli

# 2. ç™»å½•
netlify login

# 3. éƒ¨ç½²
netlify deploy --prod
```

---

### Option C: Railway

**ä¼˜ç‚¹**:
- âœ… æ”¯æŒå®Œæ•´ Node.js åº”ç”¨
- âœ… è‡ªåŠ¨ HTTPS
- âœ… ç®€å•çš„æ•°æ®åº“é›†æˆ

**éƒ¨ç½²æ­¥éª¤**:
1. è®¿é—® https://railway.app
2. è¿æ¥ GitHub ä»“åº“
3. é€‰æ‹©é¡¹ç›®å¹¶éƒ¨ç½²

---

## è§£å†³æ–¹æ¡ˆ 3: é™çº§åˆ° Next.js 14 + Cloudflare

å¦‚æœå¿…é¡»ä½¿ç”¨ Cloudflare Pagesï¼Œå¯ä»¥é™çº§åˆ° Next.js 14ï¼š

### æ­¥éª¤

1. **å¸è½½ Next.js 16**:
```bash
npm uninstall next react react-dom
```

2. **å®‰è£… Next.js 14**:
```bash
npm install next@14.2.0 react@^18 react-dom@^18
```

3. **å®‰è£… Cloudflare é€‚é…å™¨**:
```bash
npm install @cloudflare/next-on-pages
```

4. **æ›´æ–° `package.json` scripts**:
```json
{
  "scripts": {
    "pages:build": "npx @cloudflare/next-on-pages",
    "pages:deploy": "npm run pages:build && wrangler pages deploy .vercel/output/static --project-name autosaver-blog"
  }
}
```

5. **éƒ¨ç½²**:
```bash
npm run pages:deploy
```

---

## è§£å†³æ–¹æ¡ˆ 4: ä¿æŒç°çŠ¶ï¼Œä½¿ç”¨æœ¬åœ°/æ²™ç›’é¢„è§ˆ

**å½“å‰å¯ç”¨çš„è®¿é—®æ–¹å¼**:

### æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼ˆå®Œå…¨åŠŸèƒ½ï¼‰
```bash
pm2 start ecosystem.config.cjs
```
- **URL**: https://3000-iz4kvapvnuvslwtps5600-583b4d74.sandbox.novita.ai
- **åŠŸèƒ½**: âœ… æ‰€æœ‰åŠŸèƒ½å®Œæ•´å¯ç”¨
- **é€‚ç”¨**: å¼€å‘ã€æµ‹è¯•ã€æ¼”ç¤º

### é•¿æœŸè¿è¡Œ
å¦‚æœéœ€è¦é•¿æœŸè¿è¡Œï¼Œå¯ä»¥ï¼š
1. ä½¿ç”¨ VPSï¼ˆLinode, DigitalOceanç­‰ï¼‰
2. ä½¿ç”¨ Docker å®¹å™¨éƒ¨ç½²
3. ä½¿ç”¨äº‘æœåŠ¡å™¨ï¼ˆAWS EC2, Google Cloudç­‰ï¼‰

---

## æ¨èæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | éš¾åº¦ | æ—¶é—´ | æˆæœ¬ | åŠŸèƒ½å®Œæ•´æ€§ |
|------|------|------|------|------------|
| **Vercel** | â­ ç®€å• | 5åˆ†é’Ÿ | å…è´¹ | âœ… 100% |
| **Netlify** | â­â­ ç®€å• | 10åˆ†é’Ÿ | å…è´¹ | âœ… 100% |
| **é™çº§ Next.js 14** | â­â­â­ ä¸­ç­‰ | 30åˆ†é’Ÿ | å…è´¹ | âœ… 100% |
| **é™æ€å¯¼å‡º** | â­â­ ç®€å• | 10åˆ†é’Ÿ | å…è´¹ | âŒ 60% (æ— åå°) |
| **Railway** | â­â­ ç®€å• | 15åˆ†é’Ÿ | $5/æœˆ | âœ… 100% |
| **VPS** | â­â­â­â­ å¤æ‚ | 60åˆ†é’Ÿ | $5-10/æœˆ | âœ… 100% |

---

## ğŸ¯ æˆ‘çš„æ¨è

**æœ€ä½³é€‰æ‹©**: **Vercel**

### åŸå› ï¼š
1. âœ… **é›¶é…ç½®** - è‡ªåŠ¨è¯†åˆ« Next.js
2. âœ… **å…è´¹** - å…è´¹å¥—é¤å®Œå…¨å¤Ÿç”¨
3. âœ… **å¿«é€Ÿ** - 5åˆ†é’Ÿå®Œæˆéƒ¨ç½²
4. âœ… **ç¨³å®š** - Vercel æ˜¯ Next.js çš„åˆ›å»ºè€…
5. âœ… **å®Œæ•´åŠŸèƒ½** - æ‰€æœ‰åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œ

### å¿«é€Ÿéƒ¨ç½²åˆ° Vercel

```bash
# 1. å®‰è£… Vercel CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
npm i -g vercel

# 2. åœ¨é¡¹ç›®ç›®å½•ä¸­
cd /home/user/webapp

# 3. ç™»å½• Vercelï¼ˆä¼šæ‰“å¼€æµè§ˆå™¨ï¼‰
vercel login

# 4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸš€

éƒ¨ç½²åï¼ŒVercel ä¼šæä¾›ä¸€ä¸ª URLï¼Œä¾‹å¦‚ï¼š
- `https://autosaver-blog.vercel.app`
- æˆ–è€…ä½ å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸå

---

## æ•°æ®åº“è¿ç§»ï¼ˆé’ˆå¯¹ Vercel/Netlifyï¼‰

å¦‚æœä½¿ç”¨ Vercel æˆ– Netlifyï¼Œéœ€è¦è¿ç§»æ•°æ®åº“ï¼š

### é€‰é¡¹ 1: ç»§ç»­ä½¿ç”¨ Cloudflare D1

åœ¨ Vercel/Netlify ç¯å¢ƒå˜é‡ä¸­é…ç½®ï¼š
```
CLOUDFLARE_API_TOKEN=your_token
CLOUDFLARE_ACCOUNT_ID=your_account_id
```

### é€‰é¡¹ 2: ä½¿ç”¨å…¶ä»–æ•°æ®åº“

æ¨èä½¿ç”¨ï¼š
- **Vercel Postgres** (å…è´¹ï¼Œä¸ Vercel å®Œç¾é›†æˆ)
- **Supabase** (å…è´¹ï¼ŒPostgreSQL)
- **PlanetScale** (å…è´¹ï¼ŒMySQL)

---

## ç«‹å³è¡ŒåŠ¨

**æ¨èæ‰§è¡Œé¡ºåº**:

1. âœ… **ç«‹å³**: ä½¿ç”¨æœ¬åœ°é¢„è§ˆ URL è¿›è¡Œæ¼”ç¤ºå’Œæµ‹è¯•
   - URL: https://3000-iz4kvapvnuvslwtps5600-583b4d74.sandbox.novita.ai

2. â±ï¸ **5åˆ†é’Ÿå**: éƒ¨ç½²åˆ° Vercel
   ```bash
   vercel --prod
   ```

3. ğŸ“… **é•¿æœŸ**: å¦‚æœéœ€è¦ï¼Œé…ç½®è‡ªå®šä¹‰åŸŸå

---

## éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœéœ€è¦è¯¦ç»†çš„éƒ¨ç½²æŒ‡å¯¼ï¼Œè¯·å‘Šè¯‰æˆ‘ä½ æƒ³ä½¿ç”¨å“ªä¸ªå¹³å°ï¼Œæˆ‘ä¼šæä¾›è¯¦ç»†æ­¥éª¤ï¼

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ14æ—¥
